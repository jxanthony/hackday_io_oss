<% if @hacks %>
  <% @hacks.each_with_index do |hack, index| %>
    <% if @view == 'top' %>
      <div class="row hack">
        <div class="hack-voting">
          <%= link_to image_tag('arrow-up.png'), upvote_hack_path(hack), title: "vote this hack up!" %>
      	  <span class="votes"><%= hack.votes %></span>
      	  <%= link_to image_tag('arrow-down.png'), downvote_hack_path(hack), title: "vote this hack down!" %>
        </div>

        <div class="hack-details">
          <h3><%= link_to hack.title, hack %></h3>
          <span><%= truncate(hack.description, :length => 140) %></span>
        </div>
      </div>

    <% elsif @view == 'presentation' %>
      <div class="row hack">

        <div class="hack-voting">
          <%= link_to image_tag('arrow-up.png'), move_up_in_queue_hack_path(hack), title:  "move up in the queue" %>
          <%= link_to image_tag('arrow-down.png'), move_down_in_queue_hack_path(hack), title: "move back in the queue" %>
        </div>

        <div class="hack-details">
          <span>
            <h3><%= link_to hack.title, hack %>
              <% if hack.hackday.presentation_in_progress && [0,1,2,3].include?(hack.presentation_index - 1) %>
                <% notification_selector = {0 => 'important', 1 => 'warning', 2 => 'success', 3 => 'info'} %>
                <% notification_texts = {0 => 'Presenting', 1 => 'Stand by', 2 => 'On deck', 3 => 'Please get on deck'} %>
                <span class="display-group label label-<%= notification_selector[hack.presentation_index - 1] %>">
                  <%= notification_texts[hack.presentation_index - 1] %>
                </span>
              <% end %>
            </h3>
            <b>
              by 
              <% hack_submitter = hack.creator %>
              <% hack.contributions.each_with_index do |contribution, i| %>
                <% unless contribution.user == hack_submitter %>
                  <%= contribution.user.name %>, 
                <% end %>
              <% end %>
              <%= hack_submitter.name %>
            </b>
          </span>
          <p>
            <%= truncate(hack.description, :length => 140) %>
          </p>
          <% if hack.hackday.get.presentation_in_progress && (current_user.mc? || current_user.admin?) && (hack.presentation_index == 1) %>
            <p><%= link_to "This presentation is done", leave_presentation_hack_path(hack, :no_activity => true), :class => "btn btn-small btn-primary" %></p>
          <% end %>
        </div>
      </div>

    <% end %>
  <% end %>

  <% if @hacks.empty? %>
    <% if @view == 'top' %>
      <p>No hacks yet. Why not add one?</p>
    <% elsif @view == 'presentation' %>
      <p>There's nothing queued up right now.</p>
    <% end %>
  <% end %>

<% end %>